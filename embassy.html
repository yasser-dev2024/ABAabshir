<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ุงูุชูุงุตู ูุน ุงูุณูุงุฑุฉ</title>

    <link rel="stylesheet" href="libs/tailwind.css" />
    <link rel="stylesheet" href="style.css" />
</head>

<body class="font-[Cairo]">

    <!-- ===== ุตูุฏูู ุงูุตูุญุฉ ุจูู ุงูููุฏุฑ ูุงูููุชุฑ ===== -->
    <div class="page-wrapper">

        <h2 class="text-center text-xl font-bold text-green-700 mb-4">
            ุงูุชูุงุตู ูุน ุงูุณูุงุฑุฉ
        </h2>

        <div class="space-y-5">

            <!-- ุงุฎุชูุงุฑ ุงูุฏููุฉ -->
            <div>
                <label class="font-bold text-gray-700">ุงุฎุชุฑ ุงูุฏููุฉ</label>
                <select id="country" class="w-full mt-2 p-3 rounded-xl shadow border bg-white">
                    <option selected disabled>ุงุฎุชุฑ ุงูุฏููุฉ</option>
                    <option>ุงูุณุนูุฏูุฉ</option>
                    <option>ุงูุฅูุงุฑุงุช</option>
                    <option>ูุตุฑ</option>
                    <option>ุชุฑููุง</option>
                    <option>ูุฑูุณุง</option>
                    <option>ุฃููุงููุง</option>
                    <option>ุฃูุฑููุง</option>
                </select>
            </div>

            <!-- ุชุญุฏูุฏ ุงููููุน -->
            <div>
                <label class="font-bold text-gray-700">ุชุญุฏูุฏ ุงููููุน</label>
                <button onclick="detectLocation()" 
                    class="w-full bg-blue-600 text-white mt-2 py-3 rounded-xl font-bold shadow hover:bg-blue-700">
                    ุชุญุฏูุฏ ุชููุงุฆู ุนุจุฑ Google Map
                </button>
                <p id="locationStatus" class="text-sm text-gray-600 mt-1"></p>
            </div>

            <!-- ููุน ุงูุจูุงุบ -->
            <div>
                <label class="font-bold text-gray-700">ููุน ุงูุจูุงุบ</label>
                <select id="reportType" class="w-full mt-2 p-3 rounded-xl shadow border bg-white">
                    <option selected disabled>ุงุฎุชุฑ ููุน ุงูุจูุงุบ</option>
                    <option>ุจูุงุบ ุฃููู</option>
                    <option>ุจูุงุบ ุทุงุฑุฆ</option>
                    <option>ููุฏุงู ุฌูุงุฒ ุงูุณูุฑ</option>
                    <option>ุทูุจ ูุณุงุนุฏุฉ ุนุงุฌูุฉ</option>
                    <option>ุงุณุชูุณุงุฑ ุนุงู</option>
                </select>
            </div>

            <!-- ูุตู ุงูุจูุงุบ -->
            <div>
                <label class="font-bold text-gray-700">ูุตู ุงูุญุงูุฉ</label>
                <textarea id="details" rows="4"
                    class="w-full mt-2 p-3 rounded-xl shadow border bg-white"
                    placeholder="ุงูุชุจ ุชูุงุตูู ุงูุจูุงุบ ููุง..."></textarea>
            </div>

            <!-- ุฅุฑูุงู ูุฑูู -->
            <div>
                <label class="font-bold text-gray-700">ุฅุฑูุงู ููู ุฃู ุตูุฑุฉ (ุงุฎุชูุงุฑู)</label>
                <input type="file" id="attachment"
                       class="w-full mt-2 p-3 rounded-xl shadow border bg-white">
            </div>

            <!-- ุชุดุบูู ุงููุงููุฑุง ููุฏูู 15 ุซุงููุฉ -->
            <button onclick="startEmergencyVideo()"
                class="w-full bg-red-600 text-white py-3 rounded-xl font-bold shadow hover:bg-red-700">
                ุชุดุบูู ูุงููุฑุง ุงูุทูุงุฑุฆ (ูุณุฌูู 15 ุซุงููุฉ)
            </button>

            <video id="preview" class="w-full rounded-xl hidden mt-3"></video>

            <!-- ุฅุฑุณุงู ุงูุทูุจ -->
            <button onclick="sendForm()"
                class="w-full bg-green-700 text-white py-4 rounded-xl text-lg font-bold shadow hover:bg-green-800">
                ุฅุฑุณุงู ุงูุจูุงุบ
            </button>

            <!-- ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ -->
            <a href="index.html"
                class="block text-center bg-gray-300 text-gray-800 py-4 rounded-xl text-lg font-bold shadow hover:bg-gray-400">
                ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ
            </a>

        </div>
    </div>

    <!-- ========== ุณูุฑุจุช ========== -->
    <script>
        /* ุชุญุฏูุฏ ุงููููุน ุงูุฌุบุฑุงูู */
        function detectLocation() {
            if (!navigator.geolocation) {
                locationStatus.textContent = "ุงููุชุตูุญ ูุง ูุฏุนู ุชุญุฏูุฏ ุงููููุน.";
                return;
            }

            navigator.geolocation.getCurrentPosition(
                (pos) => {
                    locationStatus.textContent =
                        "ุชู ุชุญุฏูุฏ ูููุนู ุจูุฌุงุญ (ุฌุงูุฒ ููุฅุฑุณุงู โ)";
                },
                () => {
                    locationStatus.textContent = "ูุดู ุชุญุฏูุฏ ุงููููุน.";
                }
            );
        }

        /* ุชุณุฌูู ููุฏูู 15 ุซุงููุฉ */
        function startEmergencyVideo() {
            let video = document.getElementById("preview");

            navigator.mediaDevices.getUserMedia({ video: true, audio: true })
                .then((stream) => {
                    video.srcObject = stream;
                    video.classList.remove("hidden");
                    video.play();

                    setTimeout(() => {
                        stream.getTracks().forEach((t) => t.stop());
                        video.classList.add("hidden");
                        alert("๐ฅ ุชู ุชุณุฌูู ููุฏูู ุงูุทูุงุฑุฆ (15 ุซุงููุฉ) ูุฅุฑูุงูู ุชููุงุฆูุงู!");
                    }, 15000);
                })
                .catch(() => alert("ูุดู ุชุดุบูู ุงููุงููุฑุง!"));
        }

        /* ุฅุฑุณุงู ุงูุจูุงุบ */
        function sendForm() {
            alert("โ ุชู ุฅุฑุณุงู ุงูุจูุงุบ ุจูุฌุงุญ ุฅูู ุงูุณูุงุฑุฉ.");
        }
    </script>

</body>
</html>
